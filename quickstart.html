<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2013-10-31
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="StÃ©phane DESHIERE" />
    <meta name="Date-Creation-yyyymmdd" content="20131017" />
    <meta name="Date-Revision-yyyymmdd" content="20131031" />
    <meta http-equiv="Content-Language" content="en" />
    <title>WebJS - Getting Started</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

                          
        
<script src="./js/pretty-init.js" type="text/javascript"></script>
          
            </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>WebJS Core</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
            
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 2013-10-31</li> <li class="divider pull-right">|</li>
              <li id="projectVersion" class="pull-right">Version: 1.0-SNAPSHOT</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">WebJS</li>
                                                                                                                                                                                                  
      <li>
    
                          <a href="index.html" title="About WebJS">
          <i class="icon-chevron-down"></i>
        About WebJS</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="index.html" title="What is WebJS ?">
          <i class="none"></i>
        What is WebJS ?</a>
            </li>
                      
      <li>
    
                          <a href="usage.html" title="Usage">
          <i class="none"></i>
        Usage</a>
            </li>
                      
      <li class="active">
    
            <a href="#"><i class="none"></i>Getting Started</a>
          </li>
                      
      <li>
    
                          <a href="howto.html" title="How To ?">
          <i class="none"></i>
        How To ?</a>
            </li>
                      
      <li>
    
                          <a href="tree/1.0-SNAPSHOT/core" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                      
      <li>
    
                          <a href="license.html" title="License">
          <i class="none"></i>
        License</a>
            </li>
                      
      <li>
    
                          <a href="team-list.html" title="The Team">
          <i class="none"></i>
        The Team</a>
            </li>
              </ul>
        </li>
                                                                                
      <li>
    
                          <a href="sample-project.html" title="Sample Project">
          <i class="icon-chevron-down"></i>
        Sample Project</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="sample-project.html" title="Overview">
          <i class="none"></i>
        Overview</a>
            </li>
                      
      <li>
    
                          <a href="tree/1.0-SNAPSHOT/test-war" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
              </ul>
        </li>
                                                                                
      <li>
    
                          <a href="documentation.html" title="API Documentation">
          <i class="icon-chevron-down"></i>
        API Documentation</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="apidocs/index.html" title="Java Documentation">
          <i class="none"></i>
        Java Documentation</a>
            </li>
                      
      <li>
    
                          <a href="jsdoc/index.html" title="JavaScript Documentation">
          <i class="none"></i>
        JavaScript Documentation</a>
            </li>
              </ul>
        </li>
                                                                                                  
      <li>
    
                          <a href="project-reports.html" title="Project reports">
          <i class="icon-chevron-down"></i>
        Project reports</a>
                    <ul class="nav nav-list">
                      
      <li>
    
                          <a href="cobertura/index.html" title="Cobertura Test Coverage">
          <i class="none"></i>
        Cobertura Test Coverage</a>
            </li>
                      
      <li>
    
                          <a href="surefire-report.html" title="Surefire Report">
          <i class="none"></i>
        Surefire Report</a>
            </li>
                      
      <li>
    
                          <a href="pmd.html" title="PMD Report">
          <i class="none"></i>
        PMD Report</a>
            </li>
              </ul>
        </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Getting Started<a name="Getting_Started"></a></h2><!-- ~~~~~~~~~~~~~ -->
<p>Because an exemple is so much more usefull than a big explanation, here comes a typical simple WebJS page.</p>
<p>The following displays all blog entries with an edit link.</p>
<div class="section">
<h3>Java controler [Blog.java]<a name="Java_controler_Blog.java"></a></h3>
<div class="source">
<pre>@WebPage(path=&quot;blog.html&quot;, page=&quot;template/blog.html&quot;, script=&quot;js/blog-server.js&quot;)
public class Blog {
        
        @WebPart
        @Default
        public void displayBlogEntries(Request request, Bindings bindings) throws WebException {
                bindings.addProperty(&quot;blogEntries&quot;, BlogService.getInstance(request).getBlogEntries());
        }
        
        @WebPart
        @Selector(&quot;#edit&quot;)
        public void displayEditForm(Request request, Bindings bindings) throws WebException {
                String id = request.get(&quot;id&quot;);
                bindings.addProperty(&quot;editBlogEntry&quot;, BlogService.getInstance(request).getBlogEntry(Integer.valueOf(id)));
        }
}</pre></div></div>
<div class="section">
<h3>HTML Template [blog.html]<a name="HTML_Template_blog.html"></a></h3>
<div class="source">
<pre>&lt;html&gt;
        &lt;head&gt;
                &lt;script src=&quot;js/blog-client.js&quot; type=&quot;text/javascript&quot; /&gt;
        &lt;/head&gt;
        &lt;body&gt;
                &lt;div id=&quot;content&quot;&gt;
                        &lt;div class=&quot;blog&quot;&gt;
                                &lt;div class=&quot;blog-entry&quot;&gt;
                                        &lt;div class=&quot;blog-entry-actions&quot;&gt;
                                                &lt;a class=&quot;blog-entry-edit&quot; href=&quot;#&quot;&gt;Edit&lt;/a&gt;
                                        &lt;/div&gt;
                                        &lt;div class=&quot;blog-entry-content&quot;&gt;
                                                &lt;div class=&quot;blog-entry-title&quot;/&gt;
                                                &lt;div class=&quot;blog-entry-text&quot;/&gt;
                                        &lt;/div&gt;
                                        &lt;hr/&gt;
                                &lt;/div&gt;
                        &lt;/div&gt;
                        &lt;form id=&quot;edit&quot; style=&quot;display: none;&quot;&gt;
                                &lt;div class=&quot;edit-form&quot;&gt;
                                        &lt;div class=&quot;edit-content&quot;&gt;
                                                &lt;input type=&quot;hidden&quot; name=&quot;entry-id&quot; /&gt;
                                                &lt;label for=&quot;entry-title&quot;&gt;Title&lt;/label&gt;
                                                &lt;div&gt;&lt;input type=&quot;text&quot; name=&quot;entry-title&quot; /&gt;&lt;/div&gt;
                                                &lt;label for=&quot;entry-text&quot;&gt;Text&lt;/label&gt;
                                                &lt;div&gt;&lt;textarea name=&quot;entry-text&quot;&gt;&lt;/textarea&gt;&lt;/div&gt;
                                        &lt;/div&gt;
                                        &lt;div class=&quot;edit-actions&quot;&gt;
                                                &lt;button id=&quot;edit-ok&quot; type=&quot;button&quot;&gt;OK&lt;/button&gt;
                                                &lt;button id=&quot;edit-cancel&quot; type=&quot;button&quot;&gt;Cancel&lt;/button&gt;
                                        &lt;/div&gt;
                                &lt;/div&gt;
                        &lt;/form&gt;
                &lt;/div&gt;
        &lt;/body&gt;
&lt;/html&gt;</pre></div></div>
<div class="section">
<h3>Server-side JS [blog-server.js]<a name="Server-side_JS_blog-server.js"></a></h3>
<div class="source">
<pre>// Fills the blog entries using a template (if needed)
WebJS.checkBindings([&quot;blogEntries&quot;], function(){
        $(&quot;.blog-entry&quot;).template(blogEntries.toArray(), function(entry, index) {
                this.appendTo(&quot;.blog&quot;);
                this.attr(&quot;id&quot;, &quot;blog-entry-&quot;+entry.id);
                this.attr(&quot;data-pk&quot;, entry.id);
                this.find(&quot;.blog-entry-title&quot;).text(entry.title);
                this.find(&quot;.blog-entry-text&quot;).text(entry.text);
        });
});

// Fills the edit form (if needed)
WebJS.checkBindings([&quot;editBlogEntry&quot;], function(){
        $(&quot;#edit input[name=entry-id]&quot;).val(editBlogEntry.id);
        $(&quot;#edit input[name=entry-title]&quot;).val(editBlogEntry.title);
        $(&quot;#edit textarea[name=entry-text]&quot;).val(editBlogEntry.text);
});</pre></div></div>
<div class="section">
<h3>Client-side JS [blog-client.js]<a name="Client-side_JS_blog-client.js"></a></h3>
<div class="source">
<pre>$(function(){

        // On edit click, we execute the displayEditForm and unhide the div
        $(&quot;.blog-entry-edit&quot;).click(function(event){
                var pk = $(this).parents(&quot;.blog-entry&quot;).attr(&quot;data-pk&quot;);
                WebJS.executeWebPart(&quot;displayEditForm&quot;, {id: pk}, function() {
                        $(&quot;#edit&quot;).css(&quot;display&quot;, &quot;block&quot;);
                });
                return false;
        });
});</pre></div></div>
<div class="section">
<h3>Explanation<a name="Explanation"></a></h3>
<div class="section">
<h4>WebJS basic principles<a name="WebJS_basic_principles"></a></h4>
<p>When it receives an HTTP request, WebJS works in 4 simple steps :</p>
<ol style="list-style-type: decimal">
<li>Find the corresponding <tt>@WebPage</tt> class using the <tt>path</tt> attribute</li>
<li>Execute the asked <tt>@WebPart</tt> method (if not precised, the <tt>@Default</tt> one)</li>
<li>Execute the server-side JavaScript corresponding to the <tt>script</tt> attribute of the <tt>@WebPage</tt> annotation. The execution context is the web page corresponding to the <tt>page</tt> attribute.</li>
<li>Filter the HTML result user the web part <tt>@Selector</tt> annotation using jQuery.</li></ol></div>
<div class="section">
<h4>Application to our example<a name="Application_to_our_example"></a></h4>
<p>If we apply this to just putting <tt>http://localhost:8080/&lt;YourWAR&gt;/webjs/blog.html</tt> in your browser URL bar :</p>
<ol style="list-style-type: decimal">
<li>It corresponds to the <b>Blog</b> class.</li>
<li>No parameter is given so <b>displayBlogEntries</b> method will be used. So <b>blogEntries</b> binding property will be filled.</li>
<li>Our server-side JavaScript is executed with our HTML template to fill the <b>#blog</b> div with entries from <b>blogEntries</b> binding variable. (search <a href="./jsdoc/module-webjs-server-WebJS.html#checkBindings">WebJS.checkBindings</a> for more informations about its use)</li>
<li>The HTML result is fully sent because no selector is given to the <tt>@WebPart</tt></li></ol></div>
<div class="section">
<h4>Application to an Ajax request<a name="Application_to_an_Ajax_request"></a></h4>
<p>On the client side, every <b>Edit</b> link is bound to a <a href="./jsdoc/module-webjs-client-WebJS.html#executeWebPart">WebJS.executeWebPart</a> call. This is an Ajax request to a specific <tt>@WebPart</tt> by its method name. So, if we apply the WebJS rules to this Ajax request, it gives :</p>
<ol style="list-style-type: decimal">
<li>It corresponds to the <b>Blog</b> class, because path is identical to the original web page.</li>
<li><b>displayEditForm</b> is called because this <tt>@WebPart</tt> is asked. So, the blog entry corresponding to the given id is bound to the <b>editBlogEntry</b> bind variable.</li>
<li>Our server-side JavaScript is executed with our HTML template to fill the <b>#edit</b> form with entry from <b>editBlogEntry</b> binding variable.</li>
<li>Only <b>#edit</b> is sent back according to the <tt>@WebPart</tt> <tt>@Selector</tt> annotation. So <b>#edit</b> will be updated on the browser and will be displayed by the callback (line 7).</li></ol></div>
<div class="section">
<h4>What's next ?<a name="Whats_next_"></a></h4>
<p>Now that you have WebJS basic principles in mind, you can go to the <a href="./sample-project.html">Sample Project</a> section to go forward with this blog example.</p>
<p>Or simply read the <a href="./documentation.html">Documentation</a>.</p></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2013.
          All Rights Reserved.      
                    
      </div>

                                                                  <?xml version="1.0" encoding="UTF-8"?>
<div style="text-align: center;">Copyright © 2013 Stéphane DESHIERE. All Rights Reserved.</div>
                  
        
                </div>
    </footer>
  </body>
</html>
